<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Calendrier & Convocations ‚Äî U18A / U18B / U16A</title>
  <style>
    :root {
      --bg: #0e2014;
      --card: #193d27;
      --text: #f8fafc;
      --muted: #a7bca8;
      --accent1: #16a34a;
      --accent2: #22c55e;
      --accent3: #86efac;
      --shadow: 0 2px 8px rgba(0,0,0,0.3);
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      background: var(--bg);
      color: var(--text);
      font-family: "Inter", Arial, sans-serif;
      padding: 16px;
    }

    h1 {
      text-align: center;
      margin-bottom: 0.5rem;
    }

    label {
      display: block;
      text-align: center;
      color: var(--muted);
      margin-bottom: 0.3rem;
    }

    select {
      display: block;
      margin: 0 auto 1.5rem;
      padding: 8px 12px;
      background: var(--card);
      color: var(--text);
      border-radius: 8px;
      border: 1px solid var(--accent2);
      font-size: 1rem;
    }

    /* Tabs */
    .tabs {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 8px;
      margin-bottom: 1rem;
    }
    .tab {
      padding: 8px 14px;
      border-radius: 20px;
      background: rgba(255,255,255,0.1);
      cursor: pointer;
      transition: 0.2s;
    }
    .tab.active {
      background: var(--accent2);
      color: #fff;
    }

    /* Sections */
    .content { display: none; }
    .content.active { display: block; }

    /* Synth√®se */
    .synthese {
      display: grid;
      gap: 12px;
    }
    .match-card {
      background: var(--card);
      border-radius: 12px;
      padding: 14px;
      box-shadow: var(--shadow);
    }
    .match-card h3 {
      margin: 0 0 8px;
      color: var(--accent3);
    }
    .match-info {
      font-size: 0.9rem;
      color: var(--muted);
      margin-bottom: 8px;
    }
    .btn {
      display: inline-block;
      padding: 6px 10px;
      background: var(--accent2);
      border: none;
      border-radius: 8px;
      color: #fff;
      cursor: pointer;
    }

    /* Convocations */
    .convoc {
      margin-top: 8px;
      border-top: 1px solid rgba(255,255,255,0.1);
      padding-top: 8px;
    }
    .convoc ul {
      list-style: none;
      padding: 0;
      margin: 0;
    }
    .convoc li {
      display: flex;
      justify-content: space-between;
      padding: 4px 6px;
      border-bottom: 1px solid rgba(255,255,255,0.05);
    }
    .icon.maillot { color: var(--accent3); }
    .icon.voiture { color: var(--accent2); }
  </style>
</head>
<body>
  <h1>Calendrier & Convocations</h1>

  <label for="journeeSelect">Choisir une journ√©e :</label>
  <select id="journeeSelect">
    <option value="journee1.json">Journ√©e 1</option>
    <option value="journee2.json">Journ√©e 2</option>
    <option value="journee3.json">Journ√©e 3</option>
  </select>

  <div class="tabs">
    <div class="tab active" data-target="synthese">üóìÔ∏è Synth√®se</div>
    <div class="tab" data-target="u18a">U18A</div>
    <div class="tab" data-target="u18b">U18B</div>
    <div class="tab" data-target="u16a">U16A</div>
  </div>

  <!-- Synth√®se -->
  <div id="synthese" class="content active">
    <div class="synthese" id="synthese-list"></div>
  </div>

  <!-- D√©tails √©quipes -->
  <div id="u18a" class="content">
    <div class="equipe"><h2>U18A</h2><div id="table-u18a"></div><div id="convocation-u18a"></div></div>
  </div>
  <div id="u18b" class="content">
    <div class="equipe"><h2>U18B</h2><div id="table-u18b"></div><div id="convocation-u18b"></div></div>
  </div>
  <div id="u16a" class="content">
    <div class="equipe"><h2>U16A</h2><div id="table-u16a"></div><div id="convocation-u16a"></div></div>
  </div>

  <script>
    // Onglets
    const tabs = document.querySelectorAll('.tab');
    const contents = document.querySelectorAll('.content');
    tabs.forEach(tab=>{
      tab.addEventListener('click',()=>{
        tabs.forEach(t=>t.classList.remove('active'));
        contents.forEach(c=>c.classList.remove('active'));
        tab.classList.add('active');
        document.getElementById(tab.dataset.target).classList.add('active');
      });
    });

    const select = document.getElementById('journeeSelect');
    select.addEventListener('change',()=>chargerJournee(select.value));

    async function chargerJournee(fichier){
      const res=await fetch(fichier);
      const data=await res.json();

      // Synth√®se
      const synthDiv=document.getElementById('synthese-list');
      synthDiv.innerHTML='';
      Object.keys(data.equipes).forEach(equipe=>{
        const eq=data.equipes[equipe];
        eq.matches.forEach((match,i)=>{
          const card=document.createElement('div');
          card.className='match-card';
          card.innerHTML=`
            <h3>${equipe.toUpperCase()} vs ${match.adversaire}</h3>
            <div class="match-info">
              üìÖ ${match.date} ‚Ä¢ üìç ${match.lieu}
            </div>
            <button class="btn" data-team="${equipe}" data-index="${i}">Voir convocation</button>
            <div class="convoc" id="convoc-${equipe}-${i}" style="display:none"></div>
          `;
          synthDiv.appendChild(card);
        });
      });

      // Gestion des boutons de convocation
      document.querySelectorAll('.btn').forEach(btn=>{
        btn.addEventListener('click',()=>{
          const team=btn.dataset.team;
          const idx=btn.dataset.index;
          const match=data.equipes[team].matches[idx];
          const div=document.getElementById(`convoc-${team}-${idx}`);
          if(div.style.display==='none'){
            let html='<ul>';
            match.convocation.forEach(j=>{
              let icons='';
              if(j.maillot) icons+=' <span class=\"icon maillot\">üëï</span>';
              if(j.voiture) icons+=' <span class=\"icon voiture\">üöó</span>';
              html+=`<li>${j.nom}<span>${icons}</span></li>`;
            });
            html+='</ul>';
            div.innerHTML=html;
            div.style.display='block';
            btn.textContent='Masquer convocation';
          } else {
            div.style.display='none';
            btn.textContent='Voir convocation';
          }
        });
      });

      // D√©tails par √©quipe
      Object.keys(data.equipes).forEach(equipe=>{
        const tableDiv=document.getElementById(`table-${equipe}`);
        const convDiv=document.getElementById(`convocation-${equipe}`);
        let html='<table><tr><th>Date</th><th>Adversaire</th><th>Lieu</th></tr>';
        data.equipes[equipe].matches.forEach((m,i)=>{
          html+=`<tr data-team=\"${equipe}\" data-index=\"${i}\"><td>${m.date}</td><td>${m.adversaire}</td><td>${m.lieu}</td></tr>`;
        });
        html+='</table>';
        tableDiv.innerHTML=html;
        convDiv.innerHTML='';
        document.querySelectorAll(`tr[data-team='${equipe}']`).forEach(row=>{
          row.addEventListener('click',()=>{
            const match=data.equipes[equipe].matches[row.dataset.index];
            let html=`<div class='match-title'>Match vs ${match.adversaire} ‚Äî ${match.date}</div><ul>`;
            match.convocation.forEach(j=>{
              let icons='';
              if(j.maillot) icons+=' <span class=\"icon maillot\">üëï</span>';
              if(j.voiture) icons+=' <span class=\"icon voiture\">üöó</span>';
              html+=`<li>${j.nom}<span>${icons}</span></li>`;
            });
            html+='</ul>';
            convDiv.innerHTML=html;
          });
        });
      });
    }

    chargerJournee(select.value);
  </script>
</body>
</html>
